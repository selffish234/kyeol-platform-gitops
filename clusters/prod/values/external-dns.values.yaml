# ExternalDNS - PROD Environment
# Helm values for external-dns

provider: aws
aws:
  region: ap-southeast-2
  zoneType: public

domainFilters:
  - msp-g1.click

# PROD: 고유 식별자
txtOwnerId: min-kyeol-prod

policy: sync
registry: txt

sources:
  - service
  - ingress

serviceAccount:
  create: true
  name: external-dns
  annotations:
    eks.amazonaws.com/role-arn: arn:aws:iam::827913617839:role/min-kyeol-prod-external-dns-role

# PROD: 고가용성
replicaCount: 3

resources:
  limits:
    cpu: 200m
    memory: 256Mi
  requests:
    cpu: 100m
    memory: 128Mi

# PROD: 더 빠른 동기화
interval: 30s

# Log level
logLevel: info

# Pod topology spread
topologySpreadConstraints:
  - maxSkew: 1
    topologyKey: topology.kubernetes.io/zone
    whenUnsatisfiable: ScheduleAnyway
    labelSelector:
      matchLabels:
        app.kubernetes.io/name: external-dns
